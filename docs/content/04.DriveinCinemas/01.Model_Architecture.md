# DriveinCinema Modell Bevezető

## Modell mivoltja
A Driveincinema modell alkalmazásunkban egy autósmozi helyszínt reprezentál. Ez az objektum felelős azért, hogy a `driveincinemas` adatbázis tábla rekordjait Eloquent modellek formájában kezeljük.
***

## Screenings Adatbázis tábla mezői

| Mező neve         | Típus      | Leírás                                       |
|-------------------|------------|----------------------------------------------|
| id                | bigint     | Egyedi azonosító (auto-increment), kötelező. |
| name              | string     | Az autósmozi neve.                           |
| location          | string     | Az autósmozi címe.                           |
| description       | text       | Az autósmozi leírása.                        |
***

## Driveincinema Modell:
```php
class Driveincinema extends Model
{
    use HasFactory;

    protected $fillable = [
        "name",
        "location",
        "description"
    ];

    public $timestamps = false;

    public $table = "driveincinemas";

    public function screenings():HasMany {
        return $this->hasMany(Screening::class);
    }

    public function parkingSpots():HasMany {
        return $this->hasMany(Parkingspot::class);
    }
}
```
***

## Kapcsolatok
- **Driveincinema -> Screening:** Minden egyes vetítés egy adott helyszínhez kapcsolódik. Itt is szintén a `hasMany` kapcsolat érvényesül.

- **Driveincinema -> Parkingspots:** Minden egyes helyszínen több parkoló található. Szintén a `hasMany` kapcsolat van jelen.
***

## SQL Injection elleni védelem
- Rendszerünk védelmet nyújt az SQL Injection ellen, az **Eloquent ORM** és **Query Builder** használatával.
    - A `fillable` mező definiálása megakadályozza a tömeges adatmódosítást.
    - Request osztályainkban végzett validáció szintén megszűri a nem kívánt adatokat.


#### Példa:
```php
$data = $request->validated();
Driveincinema::create($data);
```
Ez nem sebezhető, mivel a `validated()` metódus csak az előre meghatározott mezőket engedi át, és az Eloquent is bindeli a változókat.
***

## API Resource
A DriveincinemaResource egy Laravel Resource osztály, amely meghatározza, hogyan nézzen ki a vetítés JSON válasza az API-n keresztül.

A rendszer jelenlegi állapotában a következő mezők szerepelnek a Resource-ban:
- `id`
- `name`
- `location`
- `description`
***
# Screening Modell Bevezető

## Modell mivoltja
Ez a modell a vetítéseket reprezentálja. Egy vetítés egy adott film egy adott autósmoziban történő levetítését jelenti egy konkrét időpontban.
***

## Screenings Adatbázis tábla mezői

| Mező neve         | Típus      | Leírás                                     |
|-------------------|------------|--------------------------------------------|
| id                | bigint     | Egyedi azonosító (auto-increment), kötelező.        |
| movie_id          | bigint     | Kapcsolat a `movies` táblához.              |
| drive_in_cinema_id  | bigint     | Kapcsolat a `drive_in_cinemas` táblához.      |
| start_time        | datetime   | A vetítés kezdési időpontja.                |
***

## Screening Modell:
```php
class Screening extends Model
{
    protected $fillable = [
        'movie_id',
        'drive_in_cinema_id',
        'start_time',
    ];

    public function movie()
    {
        return $this->belongsTo(Movie::class);
    }

    public function DriveInCinema()
    {
        return $this->belongsTo(DriveInCinema::class);
    }
}
```
***

## Kapcsolatok
- **Screening -> Movie:** Minden egyes vetítés egy adott filmhez kapcsolódik. Ehhez a `belongsTo` kapcsolatot használjuk.
- **Screening -> DriveInCinema:** Minden egyes vetítés egy adott helyszínhez kapcsolódik. Itt is szintén a `belongsTo` kapcsolat érvényesül.
***

## SQL Injection elleni védelem
- Rendszerünk védelmet nyújt az SQL Injection ellen, az **Eloquent ORM** és **Query Builder** használatával.
    - A `fillable` mező definiálása megakadályozza a tömeges adatmódosítást.
    - Request osztályainkban végzett validáció szintén megszűri a nem kívánt adatokat.


#### Példa:
```php
$data = $request->validated();
Screening::create($data);
```
Ez nem sebezhető, mivel a `validated()` metódus csak az előre meghatározott mezőket engedi át, és az Eloquent is bindeli a változókat.
***

## API Resource
A ScreeningResource egy Laravel Resource osztály, amely meghatározza, hogyan nézzen ki a vetítés JSON válasza az API-n keresztül.

A rendszer jelenlegi állapotában a következő mezők szerepelnek a Resource-ban:
- `id`
- `movie_id`
- `drive_in_cinema_id`
- `start_time`
***

## Használati megjegyzés
- A `start_time` mezőt mindig `Y-m-d H:i:s` formátumban kell megadni.
- A `movie_id` és `drive_in_cinema_id` mezők csak akkor érvényesek, ha az adott idegen kulcsok léteznek.

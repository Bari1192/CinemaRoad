# A Movie Model
A Movie modell a filmek adatait tárolja és kezeli az adatbázisban. Ez a dokumentáció részletesen bemutatja a Movie modell felépítését, funkcióit és kapcsolatait más modellekkel.

## Adatbázis Séma

A Movie modell a `movies` táblában kerül tárolásra az adatbázisban. A tábla a következő oszlopokat tartalmazza:

-   `id` (bigint, unsigned): A film egyedi azonosítója, egyben a tábla elsődleges kulcsa.

-   `title` (string, 255): A film címe. Kötelező mező.

-   `type` (string, 20): A film kategóriája. Opcionális mező.

-   `description` (text, nullable): A film részletes leírása. Opcionális mező.

-   `duration_min` (integer, nullable, min: 0): A film hossza percekben. Opcionális mező, értéke nem lehet negatív.

-   `poster_url` (string, nullable): A film poszterének URL-je. Opcionális mező.

-   `created_at` (timestamp): A rekord létrehozásának időpontja. Automatikusan kezeli a Laravel.

-   `updated_at` (timestamp): A rekord utolsó módosításának időpontja. Automatikusan kezeli a Laravel.

## Modell Osztály

A Movie modell az `App\Models\Movie` névtérben található. A modell a következő tulajdonságokkal és metódusokkal rendelkezik:

-   `$table`: A modellhez kapcsolódó adatbázistábla neve ('movies').

-   `$primaryKey`: Az elsődleges kulcs oszlop neve ('id').

-   `$timestamps`: Jelzi, hogy a modell használ-e időbélyegeket (alapértelmezés szerint `true` a Laravelben, ami az `created_at` és `updated_at` oszlopokat kezeli).

-   `$incrementing`: Jelzi, hogy az elsődleges kulcs automatikusan növekszik-e (alapértelmezés szerint `true`).

-   `$fillable`: A modellen keresztül tömegesen hozzárendelhető attribútumok tömbje, melyek a `title`, `description`, `duration_min`, `poster_url`.

-   `screenings()`: Egy-a-többhöz (1:N) kapcsolatot definiál a Screening modellel. Egy filmhez több vetítés is tartozhat.

## Adatbázis Migráció

A `movies` tábla létrehozását a megfelelő adatbázis migráció végzi. A migráció a `database/migrations` könyvtárban található, és a következő metódusokat tartalmazza:

-   `up()`: Létrehozza a `movies` táblát a megadott oszlopokkal az adatbázisban.

-   `down()`: Eltávolítja a `movies` táblát az adatbázisból, ha a migráció visszavonásra kerül.

## Adatbázis Seeder

A `MovieSeeder` osztály (`database/seeders/MovieSeeder.php`) felelős a `movies` tábla kezdeti adatokkal való feltöltéséért. A `run()` metódusban legalább egy minta film (`MovieFactory` segítségével) kerül feltöltésre. Ez a minta adat a seeder futtatásakor kerül be az adatbázisba.

## Erőforrás (Resource) Osztály

A `MovieResource` osztály (`app/Http/Resources/MovieResource.php`) a Movie modell példányainak JSON reprezentációját alakítja át. A `toArray()` metódus definiálja, hogy a Movie modell mely attribútumai kerüljenek bele a JSON válaszba, beleértve az `id`, `title`, `description`, `duration_min`, `poster_url`, `created_at` és `updated_at` mezőket.

## Controller

A `MovieController` (`app/Http/Controllers/MovieController.php`) kezeli a Movie modellel kapcsolatos HTTP kéréseket. A következő metódusokat tartalmazza:

-   `index()`: Lekérdezi az összes filmet és `MovieResource` kollekcióként adja vissza őket.

-   `store()`: Új film létrehozása a kérésben kapott adatok alapján.

-   `show()`: Egy adott film lekérdezése azonosító alapján és `MovieResource`-ként való visszaadása.

-   `update()`: Egy adott film adatainak frissítése a kérésben kapott adatok alapján.

-   `destroy()`: Egy adott film törlése az adatbázisból.

A kontroller a kérések validálásához a `StoreMovieRequest` és `UpdateMovieRequest` form request osztályokat használja.

## Kapcsolódó Modellek

A Movie modell kapcsolatban áll a `Screening` modellel. Egy filmhez (Movie) több vetítés (Screening) tartozhat. A kapcsolatot a Movie modell `screenings()` metódusa definiálja.

## Konklúzió

A Movie modell kulcsfontosságú szerepet tölt be a filmek adatainak tárolásában és kezelésében. A modell, a hozzá kapcsolódó migráció, seeder, erőforrás osztály és kontroller együttesen biztosítják a filmek adatainak perzisztens tárolását, lekérdezését, létrehozását, módosítását és törlését az alkalmazásban.
# **BaseSeats - Szerkezeti dokumentáció**

## **1. Komponens áttekintése**

- **Célja és funkciója:**
  A komponens egy parkolóhely-választó felületet valósít meg, ahol filmnézéshez kapcsolódó parkolóhelyeket lehet foglalni vagy vásárolni.

- **Fő felhasználói interakciók:**
  - Betöltéskor API-k hívása foglalások és vásárlások adatainak lekérdezésére
  - Parkolóhelyek megjelenítése rácsban, foglalt és elérhető állapotban
  - Helyek kijelölése (toggle) vásárlásra
  - "Tovább" gomb a kiválasztott helyek mentéséhez és összegzés nézetbe navigáláshoz

---

## **2. Külső függőségek**

- **Importok, csomagok:**
  - `ref`, `computed`, `onMounted`, `watch` a Vue 3 Composition API-ból
  - `useTicketStore` Pinia store a `TicketStore.js`-ből
  - `useRouter` Vue Router
  - `http` axios-alapú HTTP kliens az `@utils/http.mjs`-ből
  - `BaseSpinner` komponens a betöltő animációhoz

- **Betűtípusok, CDN-ek:**
  - Nincs

---

## **3. Strukturális elemek**

| **Elem**                                                                                                                            | **Funkció, stílusjegyek**                                                                                                                                                       |
| ----------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `<div v-if="loading" class="w-full h-full flex flex-col items-center justify-center py-12">`                                        | Betöltő képernyő konténer. Flex középre rendezett, `py-12` vertikális paddinggal.                                                                                               |
| `<BaseSpinner class="w-12 h-12 text-pink-600 mb-4" />`                                                                              | Spinner ikon. Méretek: `w-12 h-12`, szín: `text-pink-600`, alsó margó: `mb-4`.                                                                                                  |
| `<p class="text-slate-300 text-lg font-semibold">Betöltés...</p>`                                                                   | Betöltő szöveg stílusa: `text-slate-300`, `text-lg`, `font-semibold`.                                                                                                           |
| `<div v-else class="container w-full h-full lg:max-w-3xl xl:max-w-5xl mx-auto my-12 lg:my-0 bg-gray-800/80 rounded-3xl shadow-xl">` | Fő konténer filmvászon és helyek számára. Reszponzív max szélesség (`lg`,`xl`), `bg-gray-800/80`, lekerekített sarkok, árnyék.                                                  |
| `<h2 class="text-3xl text-slate-400 font-bold mb-8 text-center uppercase">`                                                         | Cím (jelenleg üres). Stílus: `text-3xl`, `text-slate-400`, `font-bold`, `mb-8`, `text-center`, `uppercase`.                                                                     |
| `<div class="grid grid-cols-8 w-full h-full text-center pt-4">`                                                                     | Fő (main) fejléc konténer: 8 oszlopos grid, `pt-4`.                                                                                                                             |
| Fő (main) panel (`col-span-7 ... Mozivászon`):                                                                                      | `border-t-8 border-t-gray-950/30`, `shadow-md`, `bg-gray-900`, `mb-12`, `rounded-t-full`, `border-b-4 border-pink-900/90`, `text-4xl uppercase`, belső elemek: fehér blur, cím. |
| `<div class="mx-auto w-full h-full px-8">`                                                                                          | Helyek tartalom külső paddinggel (`px-8`).                                                                                                                                      |
| Helyek konténer (`container mx-auto ... rounded-3xl shadow-2xl`):                                                                   | `bg-gray-800/80`, `border-t-4 border-t-slate-900/65`, `rounded-3xl`, `shadow-2xl`.                                                                                              |
| Fejléc rács (`grid grid-cols-11 ... mb-2 md:mb-4`):                                                                                 | Oszlopszámok megjelenítése. Grid 11 oszlop, `text-yellow-500`, `border-2 border-pink-700/50 rounded-full`, reszponzív méretek.                                                  |
| Sorok (`v-for="row in rows" ... grid grid-cols-11 gap-2`):                                                                          | Rács 11 oszlopban, soron belüli cellák.                                                                                                                                         |
| Sor betű (`<div v-if="row !== 'X'" class="font-semibold text-yellow-500 border-2 ...">`):                                           | Sorazonosító betű, `text-yellow-500`, körvonal, lekerekítés, reszponzív padding.                                                                                                |
| Útjelző (`<div v-if="row === 'X'" class="bg-gray-600/30 col-span-10 h-4 md:h-10">`):                                                | Út vízszintes sávként, `bg-gray-600/30`, magaság váltakozik.                                                                                                                    |
| Parkolóhely cella (`<div v-for="col in 8" ...>`):                                                                                   | Kattintható `div` parkolóhelyeknek, `cursor-pointer`, `border` szabályok, `aspect-square`, `bg-gray-900/40`, autós ikon háttérkép (`md:bg-[url...]`).                           |
| Kijelölt/foglalt állapot osztályai                                                                                                  | `.cursor-not-allowed -z-10 bg-red-800 border-red-800` (foglalt), `.border-lime-500/45 bg-lime-700/45` (kijelölt), `.border-gray-400 bg-slate-400/15` (elérhető).                |
| Kijelölt helyek listázása (`<div v-if="selectedSeats.length" ...>`):                                                                | Kijelzett kiválasztott helyek `text-lime-500`, aláhúzás.                                                                                                                        |
| "Tovább" gomb (`<button @click="handleNext" ...>`):                                                                                 | Feltételes engedélyezés, szín: `bg-pink-700` engedett, `bg-gray-400 opacity-60` tiltott, `hover:bg-pink-800`, `border-white/65`, lekerekített sarkok.                           |

---

## **4. Logika és interakciók**

- **Script setup tartalom:**
  - Importálás: Composition API, Pinia store, router, http kliens, spinner komponenst
  - `rows`, `cols` konstansok definiálása a rács felépítéséhez
  - Reaktív állapotok: `seats`, `selectedSeats`, `reservations`, `purchases`, `loading`

- **Életciklus és adatok betöltése:**
  - `initSeats()`: sorok és oszlopok alapján létrehozza a seat objektumokat
  - `loadData()`: párhuzamosan lekérdezi a foglalásokat és vásárlásokat, elmenti, majd `updateOccupiedSeats()`
  - `onMounted`, `watch(ticketStore.time)`: komponens mountkor és időpont-változáskor betöltik az adatokat

- **Számított érték:**
  - `foglaltParkolok`: a Pinia store-ban kiválasztott vetítés (`ticketStore.time.id`) alapján szűri és egyesíti a foglalt/vásárolt helyeket

- **Eseménykezelés:**
  - `toggleSeat(seatID)`: kattintáskor engedélyezi a hely kijelölését vagy törlését, ha nem foglalt
  - `handleNext()`: ellenőrzi, hogy van-e kiválasztott hely, menti a Pinia store-ba, majd navigál a Summary oldalra

---

## **5. Stílus összefoglaló**

| **Kategória**      | **Részletek**                                                                                |
| ------------------ | -------------------------------------------------------------------------------------------- |
| **Színek**         | `bg-gray-800/80`, `bg-gray-900/40`, `text-slate-400`, `text-yellow-500`, `bg-pink-700`, stb. |
| **Betűtípus**      | Alapértelmezett Tailwind font stack (sans serif), `font-semibold`, `font-bold`               |
| **Reszponzivitás** | Breakpoint-ek: `sm`, `md`, `lg`, `xl`; grid-osztályok, reszponzív padding és méretek         |
| **Effektek**       | `hover:bg-pink-800`, `transition duration-300`, `shadow-xl`, `shadow-2xl`, `rounded-3xl`     |

---

**Összegzés:**
A komponens egy Vue 3 Composition API-val írt parkolóhely-választó, amely API hívásokkal tölti be a foglalási adatokat, rácsban jeleníti a helyeket, és lehetőséget ad a kiválasztott helyek mentésére és következő összegző nézetre navigálásra.

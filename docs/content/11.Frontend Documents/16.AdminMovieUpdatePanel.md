# AdminMovieUpdatePanel, a mozifilm adatszerkesztő admin felület.

> **Komponens célja:** *egy* egységesített adminisztrátori felület, a film adatainak (**movie**) módosításához, reszponzív felépítéssel.

> Megjegyzés: A komponens az ***AdminPanel*** oldalon elérhető.
---

## Tartalomjegyzék

1. [Technológiák és függőségek](#technológiák-és-függőségek)
2. [Fájl áttekintés](#fájl-áttekintés)
3. [Adatmodellek és tárolás](#adatmodellek-és-tárolás)
4. [Reaktív állapot és számított(computed) értékek](#reaktív-állapot-és-számítottcomputed-értékek)
5. [Film módosítási folyamata](#film-módosítási-folyamata)
6. [Film törlési folyamata](#film-törlési-folyamata)
7. [Visszajelzések](#visszajelzések)
8. [API (store-módszerek)](#api-store-módszerek)

---

## Technológiák és függőségek
* **Vue 3**: (Composition API, `<script setup>`)
* **Pinia**: store-ok: `useUserStore`, `useMovieStore`
* **Tailwind CSS**: utility osztályok
* **Egyedi Toast szolgáltatás**: `ToastService`

---

## Fájl áttekintés

- **Adminisztrátori táblázat**: Egy reszponzív, áttekinthető táblázat, benne minden film listázva megtalálható.

---

## Adatmodellek és tárolás

**Források:** Pinia store-ok (külső API/Backend felé ezek a store-ok fognak kommunikálni).

### UpdateMovieRequest
* `title`
* `description`
* `type`
* `director`
* `release_date`
* `is_premier`
* `age_limit`
* `duration_min`
* `poster_url`
* `actors`

* Adatmentési logika:
> Promise mentési logika
```js
await movieStore.updateMovie(movie.id, movieData);
```

---

## Reaktív állapotok
### Állapotok
* `editableMovies:` – Lekéri az összes filmet, így tartalmazza az összes frissen szerkeszthető filmet.
* `loading:` – Oldal töltődésének állapotát követi.

---

## Film módosítási folyamata

* Film adatainak módosítását követően a sor végén feltüntetett "Mentés" gombra kattintva, egy *mentési jóváhagyó* üzenet fogad minket, melyet jóváhagyva egy ToastService visszajelző üzenet értesít minket a mentés sikerességéről. 

* **UI állapot:** A mozifilm minden adatát egyénileg, külön külön lehet módosítani. Cím, típus, korhatár, megjelenés ideje, rendező, premier avagy sem.

---

#### Film törlési folyamata

* A táblázatban szereplő sor végén feltüntetett "Törlés" gombra kattintva, egy *törlési jóváhagyó* üzenet fogad minket, melyet jóváhagyva egy ToastService visszajelző üzenet értesít minket a törlés sikerességéről. 

---

## Visszajelzések

* Sikeres műveleteknél: `ToastService.showSuccess(...)`

---

## API (store-módszerek)

A komponens a következő store metódusokra támaszkodik (feltételezett szerződés):

* `userStore.getUser(): Promise<void>` – lekéri a felhasználót.
* `movieStore.getMovies(): Promise<void>` – feltölti `movies`-t.
* `movieStore.deleteMovie(): Promise<void>` - paraméterben megkapott film ID-t használva kitörli azt.
* `movieStore.updateMovie(): Promise<void>` - paraméterben megkapott film ID-val és a hozzátartozó adatokkal frissíti az adott filmet.